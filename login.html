<!DOCTYPE html>
<html>
  <head>
    <title>Sample Login/Signup Form</title>

    <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-app.js"></script>

    <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-auth.js"></script>

    <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-functions.js"></script>

    <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-database.js"></script>
  </head>
  <body>
    <div id="loginScreen">
      <h1>Login Form</h1>
      <input type="email" placeholder="Email" id="email" />
      <input type="password" placeholder="Password" id="password" />

      <button id="login">LogIn</button>
    </div>
    <div id="dashboard">
      <div id="userDetails"></div>
      <button id="logout">LogOut</button>
    </div>
    <script>
      // Your web app's Firebase configuration
      var firebaseConfig = {
        apiKey: "AIzaSyA2nzSbHqfBdX8AOokdhEsRK6gp1F01Fcs",
        authDomain: "webapp-b56ec.firebaseapp.com",
        projectId: "webapp-b56ec",
        storageBucket: "webapp-b56ec.appspot.com",
        messagingSenderId: "222164688075",
        appId: "1:222164688075:web:af36cad01a325bcba6cf4e",
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);

      document.getElementById("login").addEventListener("click", loginUser);
      document.getElementById("logout").addEventListener("click", logoutUser);

      document.getElementById("loginScreen").style.display = "block";
      document.getElementById("dashboard").style.display = "none";

      function loginUser() {
        let email = document.getElementById("email").value;
        let password = document.getElementById("password").value;

        firebase
          .auth()
          .signInWithEmailAndPassword(email, password)
          .catch((e) => {
            console.log(e);
          });
      }

      function logoutUser() {
        firebase
          .auth()
          .signOut()
          .then(() => {
            document.getElementById("loginScreen").style.display = "block";
            document.getElementById("dashboard").style.display = "none";
          })
          .catch((e) => {
            console.log(e);
          });
      }
      function showUserDetails(user) {
        document.getElementById(
          "userDetails"
        ).innerHTML = `<p> LoggedIn successfully with ${user.email} !!!</p>`;
      }

      firebase.auth().onAuthStateChanged((user) => {
        if (user) {
          console.log(user);

          document.getElementById("loginScreen").style.display = "none";
          document.getElementById("dashboard").style.display = "block";
          showUserDetails(user);
        } else {
          document.getElementById("loginScreen").style.display = "block";
          document.getElementById("dashboard").style.display = "none";
        }
      });
    </script>
  </body>
</html>
